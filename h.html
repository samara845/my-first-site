<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Movie with Ads</title>
  <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
  <script src="https://vjs.zencdn.net/7.20.3/video.min.js"></script>
  <link href="https://vjs.zencdn.net/7.20.3/video-js.css" rel="stylesheet" />

  <!-- Video.js IMA Ads Plugin -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/videojs-contrib-ads/6.9.0/videojs-contrib-ads.min.js"></script>
  <script src="https://imasdk.googleapis.com/js/sdkloader/ima3.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/videojs-ima/1.8.0/videojs.ima.min.js"></script>

  <style>
    body { background: #000; color: #fff; text-align: center; }
    #moviePlayer { width: 80%; height: 450px; margin-top: 30px; }
  </style>
</head>
<body>

  <h2>ðŸŽ¬ Movie Player with ExoClick Ads</h2>
  
  <video id="moviePlayer" class="video-js vjs-default-skin" controls></video>

  <script>
    var video = document.getElementById('moviePlayer');

    // âœ… Bunny Stream HLS video link (replace with your Bunny Stream URL)
    var movieURL = "https://vz-1d21e73f-5e9.b-cdn.net/3a2d5e64-eb6f-4ae4-b3e9-1c956b543398/playlist.m3u8";  

    // âœ… Initialize HLS.js
    if (Hls.isSupported()) {
      var hls = new Hls();
      hls.loadSource(movieURL);
      hls.attachMedia(video);
    } else if (video.canPlayType('application/vnd.apple.mpegurl')) {
      video.src = movieURL;
    }

    // âœ… Initialize Video.js
    var player = videojs('moviePlayer');

    // âœ… ExoClick VAST Tag (replace with your tag)
    var vastTag = "https://syndication.exoclick.com/splash.php?idzone=5716214";

    // âœ… IMA Ads setup
    player.ima({
      id: 'moviePlayer',
      adTagUrl: vastTag
    });

    // Pre-roll Ad (auto handled by IMA plugin)
    player.ready(function() {
      player.ima.initializeAdDisplayContainer();
      player.ima.requestAds();
    });

    // Mid-roll (15 min = 900s)
    player.on('timeupdate', function() {
      if (player.currentTime() >= 900 && !player.midAdPlayed) {
        player.midAdPlayed = true;
        player.ima.requestAds();
      }
    });

    // Last-roll (movie ke last 10 min pe ad)
    player.on('timeupdate', function() {
      if ((player.duration() - player.currentTime()) <= 600 && !player.lastAdPlayed) {
        player.lastAdPlayed = true;
        player.ima.requestAds();
      }
    });
  </script>

</body>
</html>
